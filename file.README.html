<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-slurm">slurm</h1>

<h2 id="label-Table+of+Contents">Table of Contents</h2>
<!-- vim-markdown-toc GFM --><ul><li>
<p><a href="#description">Description</a></p>
</li><li>
<p><a href="#setup">Setup</a></p>
<ul><li>
<p><a href="#what-slurm-affects">What slurm affects</a></p>
</li><li>
<p><a href="#setup-requirements">Setup Requirements</a></p>
</li><li>
<p><a href="#beginning-with-slurm">Beginning with slurm</a></p>
</li></ul>
</li><li>
<p><a href="#usage">Usage</a></p>
</li><li>
<p><a href="#reference">Reference</a></p>
</li><li>
<p><a href="#limitations">Limitations</a></p>
</li><li>
<p><a href="#development">Development</a></p>
</li></ul>
<!-- vim-markdown-toc -->
<h2 id="label-Description">Description</h2>

<p>This slurm module is a downsized version of <a href="https://forge.puppet.com/treydock/slurm">treydock/slurm</a>. Its complexity is reduced by removing all aspects of configuring slum. In short, every aspect that is done in the “slurm dir” is removed, i.e. managing partitions, QOS, users, GRES. We at our site are manging the contents of <code>/etc/slurm</code> in its own git repository independent from managing packges, files and daemons.</p>

<h2 id="label-Setup">Setup</h2>

<h3 id="label-What+slurm+affects">What slurm affects</h3>

<p>In short this module only installs relevant packages and dependencies, deploys files and directories (state, log, logroration…) and manages daemons and firewall rules.</p>

<h3 id="label-Setup+Requirements">Setup Requirements</h3>

<p>The module&#39;s design allows changing the most important things through the <code>slurm</code> class. The daemons getting installed are chosen by the setting the respective attributes to true. More than one role can be deployed on a host, e.g. <code>slurmdbd</code> and <code>slurmctld</code>. See usage examples below.</p>

<p>In order to use SLURM the munge daemon must be configured and a munge key has to be deployed. This module does not manage neither of them. Instead make use of an additional module like <a href="https://forge.puppet.com/treydock/munge">treydock/munge</a>.</p>

<p>Instead of declaring the attributes within the a manifest it&#39;s perfectly possible to provide the configuration data in hiera. The module itself is using hiera for its default data.</p>

<h3 id="label-Beginning+with+slurm">Beginning with slurm</h3>

<p>By just including the <code>slurm</code> class as follow, the node is setup as a SLURM client and the defaults set in module&#39;s <code>common.yaml</code> is applied:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_include'>include</span> <span class='id identifier rubyid_slurm'>slurm</span>
</code></pre>

<p>Other use cases are outlined in the right below.</p>

<h2 id="label-Usage">Usage</h2>

<p>By just including the class <code>slurm</code> the given host acts as a SLURM client. This is the role primarily used on thing like login nodes.</p>

<p>On a worker node the daemon <code>slurmd</code> is needed. To designate a node as a worker node, the following snippet will do the job.</p>

<pre class="code ruby"><code class="ruby">class { &#39;slurm&#39;:
  slurmd =&gt; true,
}
</code></pre>

<p>Likewise for the designation of a slurm control daemon, the parameter <code>slurmctld</code> is used. In the following example, not only the control daemon gets installed but also the <code>slurmdbd</code> daemon to connect to a MySQSL database server. Setting up the database server itself is out of the scope of this module and has to be installed elsewhere.</p>

<pre class="code ruby"><code class="ruby">class { &#39;slurm&#39;:
  slurmdbd  =&gt; true,
  slurmctld =&gt; true,
}
</code></pre>

<p>All of the parameters can also be set by putting the configuration data to hiera and make use automatic parameter binding feature of Puppet.</p>

<p>For all possible configuration parameters the reference below should be consulted.</p>

<h2 id="label-Reference">Reference</h2>

<p>See <a href="REFERENCE.md">REFRENCE.md</a> in this repository.</p>

<h2 id="label-Limitations">Limitations</h2>

<p>This module is currently only tested on CentOS-7.</p>

<h2 id="label-Development">Development</h2>

<p>This project is using PDK and feature unit tests. In order to participate, please take the time to get into it to if not already familiar with.</p>

<p>If you want to contribute to this project: * File an issue over at <a href="https://github.com/hpc-unibe-ch/puppet-module-slurm/issues">github.com</a> telling us about the changes you have mind * Fork the repository and make your changes on a feature branch * Genereate a pull request against the <code>main</code> branch. Don&#39;t forget to rebase before creating a PR.</p>
</div></div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>